(this.webpackJsonppatientor=this.webpackJsonppatientor||[]).push([[0],{262:function(e,a,t){e.exports=t(438)},438:function(e,a,t){"use strict";t.r(a);var n,l,r,c=t(0),i=t.n(c),o=t(60),s=t.n(o),d=(t(266),t(29)),u=t.n(d),m=t(19),p=t(44),h=t.n(p),E=t(73),f=t(53),b=t(448),v=t(457),g=t(454),C=t(449),y="http://localhost:3001/api",k=t(74),D=t(37),O=function(e){return{type:"UPDATE_PATIENT",payload:e}},S={patients:{},diagnosisCodes:[]},Y=Object(c.createContext)([S,function(){return S}]),w=function(){return Object(c.useContext)(Y)},H=t(453),F=t(451),T=t(456),x=t(455),M=t(15),N=t(458),j=t(450),R=t(86),L=function(e){var a=e.name,t=e.label,n=e.options,l=e.id;return l=l||Object(N.a)(),i.a.createElement(j.a.Field,null,i.a.createElement("label",{htmlFor:l},t),i.a.createElement(M.b,{id:l,as:"select",name:a,className:"ui dropdown"},n.map((function(e){return i.a.createElement("option",{key:e.value,value:e.value},e.label||e.value)}))))},A=function(e){var a=e.field,t=e.label,n=e.placeholder,l=e.id;return l=l||Object(N.a)(),i.a.createElement(j.a.Field,null,i.a.createElement("label",{htmlFor:l},t),i.a.createElement(M.b,Object.assign({id:l,placeholder:n},a)),i.a.createElement("div",{style:{color:"red"}},i.a.createElement(M.a,{name:a.name})))},q=function(e){var a=e.diagnoses,t=e.setFieldValue,n=e.setFieldTouched,l="diagnosisCodes",r=a.map((function(e){return{key:e.code,text:"".concat(e.name," (").concat(e.code,")"),value:e.code}}));return i.a.createElement(j.a.Field,null,i.a.createElement("label",null,"Diagnoses"),i.a.createElement(R.a,{fluid:!0,multiple:!0,search:!0,selection:!0,options:r,onChange:function(e,a){n(l,!0),t(l,a.value)}}),i.a.createElement(M.a,{name:l}))};!function(e){e[e.Healthy=0]="Healthy",e[e.LowRisk=1]="LowRisk",e[e.HighRisk=2]="HighRisk",e[e.CriticalRisk=3]="CriticalRisk"}(n||(n={})),function(e){e.Hospital="Hospital",e.OccupationalHealthcare="OccupationalHealthcare",e.HealthCheck="HealthCheck"}(l||(l={})),function(e){e.Male="male",e.Female="female",e.Other="other"}(r||(r={}));var I=[{value:r.Male,label:"Male"},{value:r.Female,label:"Female"},{value:r.Other,label:"Other"}],V=function(e){var a=e.onSubmit,t=e.onCancel;return i.a.createElement(M.d,{initialValues:{name:"",ssn:"",dateOfBirth:"",occupation:"",gender:r.Other},onSubmit:a,validate:function(e){var a={};return e.name||(a.name="Field is required"),e.ssn||(a.ssn="Field is required"),e.dateOfBirth||(a.dateOfBirth="Field is required"),e.occupation||(a.occupation="Field is required"),a}},(function(e){var a=e.isValid,n=e.dirty;return i.a.createElement(M.c,{className:"form ui"},i.a.createElement(M.b,{label:"Name",placeholder:"Name",name:"name",component:A}),i.a.createElement(M.b,{label:"Social Security Number",placeholder:"SSN",name:"ssn",component:A}),i.a.createElement(M.b,{label:"Date Of Birth",placeholder:"YYYY-MM-DD",name:"dateOfBirth",component:A}),i.a.createElement(M.b,{label:"Occupation",placeholder:"Occupation",name:"occupation",component:A}),i.a.createElement(L,{label:"Gender",name:"gender",options:I}),i.a.createElement(x.a,null,i.a.createElement(x.a.Column,{floated:"left",width:5},i.a.createElement(g.a,{type:"button",onClick:t,color:"red"},"Cancel")),i.a.createElement(x.a.Column,{floated:"right",width:5},i.a.createElement(g.a,{type:"submit",floated:"right",color:"green",disabled:!n||!a},"Add"))))}))},_=function(e){var a=e.modalOpen,t=e.onClose,n=e.onSubmit,l=e.error;return i.a.createElement(F.a,{open:a,onClose:t,centered:!1,closeIcon:!0},i.a.createElement(F.a.Header,null,"Add a new patient"),i.a.createElement(F.a.Content,null,l&&i.a.createElement(T.a,{inverted:!0,color:"red"},"Error: ".concat(l)),i.a.createElement(V,{onSubmit:n,onCancel:t})))},P=t(460),B=["The patient is in great shape","The patient has a low risk of getting sick","The patient has a high risk of getting sick","The patient has a diagnosed condition"],G=function(e){var a=e.rating,t=e.showText;return i.a.createElement("div",{className:"health-bar"},i.a.createElement(P.a,{icon:"heart",disabled:!0,rating:4-a,maxRating:4}),t?i.a.createElement("p",null,B[a]):null)},U=function(){var e=w(),a=Object(m.a)(e,2),t=a[0].patients,n=a[1],l=i.a.useState(!1),r=Object(m.a)(l,2),c=r[0],o=r[1],s=i.a.useState(),d=Object(m.a)(s,2),p=d[0],f=d[1],v=function(){o(!1),f(void 0)};return i.a.createElement("div",{className:"App"},i.a.createElement(b.a,{textAlign:"center"},i.a.createElement("h3",null,"Patient list")),i.a.createElement(H.a,{celled:!0},i.a.createElement(H.a.Header,null,i.a.createElement(H.a.Row,null,i.a.createElement(H.a.HeaderCell,null,"Name"),i.a.createElement(H.a.HeaderCell,null,"Gender"),i.a.createElement(H.a.HeaderCell,null,"Occupation"),i.a.createElement(H.a.HeaderCell,null,"Health Rating"))),i.a.createElement(H.a.Body,null,Object.values(t).map((function(e){return i.a.createElement(H.a.Row,{key:e.id},i.a.createElement(H.a.Cell,null,i.a.createElement(E.b,{to:"/".concat(e.id)},e.name)),i.a.createElement(H.a.Cell,null,e.gender),i.a.createElement(H.a.Cell,null,e.occupation),i.a.createElement(H.a.Cell,null,i.a.createElement(G,{showText:!1,rating:1})))})))),i.a.createElement(_,{modalOpen:c,onSubmit:function(e){var a,t;return u.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return l.prev=0,l.next=3,u.a.awrap(h.a.post("".concat(y,"/patients"),e));case 3:a=l.sent,t=a.data,n({type:"ADD_PATIENT",payload:t}),v(),l.next=13;break;case 9:l.prev=9,l.t0=l.catch(0),console.error(l.t0.response.data),f(l.t0.response.data.error);case 13:case"end":return l.stop()}}),null,null,[[0,9]])},error:p,onClose:v}),i.a.createElement(g.a,{onClick:function(){return o(!0)}},"Add New Patient"))},J=t(77),z=t(120),K=function(e){var a=e.entry;return i.a.createElement("div",null,i.a.createElement("b",null,"Discharged:")," ",a.discharge.date,i.a.createElement("br",null),i.a.createElement("b",null,"Discharge reason:")," ",a.discharge.criteria)},Q=function(e){var a,t,n=e.entry;return i.a.createElement("div",null,i.a.createElement("b",null,"Employer:")," ",n.employerName,i.a.createElement("br",null),i.a.createElement("b",null,"Sick leave:")," ",n.sickLeave?"".concat(null===(a=n.sickLeave)||void 0===a?void 0:a.startDate," - ").concat(null===(t=n.sickLeave)||void 0===t?void 0:t.endDate):"No")},W=function(e){var a=e.entry;return i.a.createElement("div",null,i.a.createElement(z.a,null,i.a.createElement(J.a,{name:"heart",color:function(e){switch(e){case n.Healthy:return"green";case n.LowRisk:return"yellow";case n.HighRisk:return"orange";case n.CriticalRisk:return"red";default:return"black"}}(a.healthCheckRating)}),function(e){switch(e){case n.Healthy:return"Healthy";case n.LowRisk:return"Low risk";case n.HighRisk:return"High risk";case n.CriticalRisk:return"Critical risk";default:return"Unknown health rating"}}(a.healthCheckRating)))};function X(e){return/([12]\d{3}-(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01]))/i.test(e)}var Z=function(e){var a=e.onSubmit,t=e.onCancel,n=w(),r=Object(m.a)(n,1)[0].diagnosisCodes;return i.a.createElement(M.d,{initialValues:{description:"",date:"",specialist:"",diagnosisCodes:[],dischargeDate:"",dischargeCriteria:""},onSubmit:function(e){a({description:e.description,date:e.date,specialist:e.specialist,diagnosisCodes:e.diagnosisCodes,type:l.Hospital,discharge:{date:e.dischargeDate,criteria:e.dischargeCriteria}})},validate:function(e){var a={};return e.description||(a.description="Field is required"),e.date?X(e.date)||(a.date="Date is formatted incorrectly. Expected YYYY-MM-DD format"):a.date="Field is required",e.specialist||(a.specialist="Field is required"),e.dischargeDate?X(e.date)||(a.dischargeDate="Discharge date is formatted incorrectly. Expected YYYY-MM-DD format"):a.dischargeDate="Field is required",e.dischargeCriteria||(a.dischargeCriteria="Field is required"),a}},(function(e){var a=e.isValid,n=e.dirty,l=e.setFieldValue,c=e.setFieldTouched;return i.a.createElement(M.c,{className:"form ui"},i.a.createElement(M.b,{label:"Description",placeholder:"Description",name:"description",component:A}),i.a.createElement(M.b,{label:"Date",placeholder:"YYYY-MM-DD",name:"date",component:A}),i.a.createElement(M.b,{label:"Specialist",placeholder:"Specialist",name:"specialist",component:A}),i.a.createElement(M.b,{label:"Discharge date",placeholder:"YYYY-MM-DD",name:"dischargeDate",component:A}),i.a.createElement(M.b,{label:"Criteria",placeholder:"Criteria",name:"dischargeCriteria",component:A}),i.a.createElement(q,{setFieldValue:l,setFieldTouched:c,diagnoses:Object.values(r)}),i.a.createElement(x.a,null,i.a.createElement(x.a.Column,{floated:"left",width:5},i.a.createElement(g.a,{type:"button",onClick:t,color:"red"},"Cancel")),i.a.createElement(x.a.Column,{floated:"right",width:5},i.a.createElement(g.a,{type:"submit",floated:"right",color:"green",disabled:!n||!a},"Add entry"))))}))},$=function(e){var a=e.onSubmit,t=e.onCancel,n=w(),r=Object(m.a)(n,1)[0].diagnosisCodes;return i.a.createElement(M.d,{initialValues:{description:"",date:"",specialist:"",diagnosisCodes:[],employerName:"",sickLeaveStartDate:"",sickLeaveEndDate:""},onSubmit:function(e){a({description:e.description,date:e.date,specialist:e.specialist,diagnosisCodes:e.diagnosisCodes,type:l.OccupationalHealthcare,employerName:e.employerName,sickLeave:{startDate:e.sickLeaveStartDate,endDate:e.sickLeaveEndDate}})},validate:function(e){var a={};return e.description||(a.description="Field is required"),e.date?X(e.date)||(a.date="Date is formatted incorrectly. Expected YYYY-MM-DD format"):a.date="Field is required",e.specialist||(a.specialist="Field is required"),e.employerName||(a.employerName="Field is required"),""===e.sickLeaveStartDate||X(e.sickLeaveStartDate)||(a.sickLeaveStartDate="Sick leave start date is formatted incorrectly. Expected empty or YYYY-MM-DD format"),""===e.sickLeaveEndDate||X(e.sickLeaveEndDate)||(a.sickLeaveEndDate="Sick leave start date is formatted incorrectly. Expected empty or YYYY-MM-DD format"),a}},(function(e){var a=e.isValid,n=e.dirty,l=e.setFieldValue,c=e.setFieldTouched;return i.a.createElement(M.c,{className:"form ui"},i.a.createElement(M.b,{label:"Description",placeholder:"Description",name:"description",component:A}),i.a.createElement(M.b,{label:"Date",placeholder:"YYYY-MM-DD",name:"date",component:A}),i.a.createElement(M.b,{label:"Specialist",placeholder:"Specialist",name:"specialist",component:A}),i.a.createElement(M.b,{label:"Employer name",placeholder:"Employer name",name:"employerName",component:A}),i.a.createElement(M.b,{label:"Sick leave start date",placeholder:"YYYY-MM-DD",name:"sickLeaveStartDate",component:A}),i.a.createElement(M.b,{label:"Sick leave end date",placeholder:"YYYY-MM-DD",name:"sickLeaveEndDate",component:A}),i.a.createElement(q,{setFieldValue:l,setFieldTouched:c,diagnoses:Object.values(r)}),i.a.createElement(x.a,null,i.a.createElement(x.a.Column,{floated:"left",width:5},i.a.createElement(g.a,{type:"button",onClick:t,color:"red"},"Cancel")),i.a.createElement(x.a.Column,{floated:"right",width:5},i.a.createElement(g.a,{type:"submit",floated:"right",color:"green",disabled:!n||!a},"Add entry"))))}))},ee=function(e){var a=e.onSubmit,t=e.onCancel,r=w(),c=Object(m.a)(r,1)[0].diagnosisCodes,o={description:"",date:"",specialist:"",diagnosisCodes:[],healthCheckRating:n.Healthy};return i.a.createElement(M.d,{initialValues:o,onSubmit:function(e){a({description:e.description,date:e.date,specialist:e.specialist,diagnosisCodes:e.diagnosisCodes,type:l.HealthCheck,healthCheckRating:Number(e.healthCheckRating)})},validate:function(e){var a={};return e.description||(a.description="Field is required"),e.date?X(e.date)||(a.date="Date is formatted incorrectly. Expected YYYY-MM-DD format"):a.date="Field is required",e.specialist||(a.specialist="Field is required"),a}},(function(e){var a=e.isValid,l=e.dirty,r=e.setFieldValue,o=e.setFieldTouched;return i.a.createElement(M.c,{className:"form ui"},i.a.createElement(M.b,{label:"Description",placeholder:"Description",name:"description",component:A}),i.a.createElement(M.b,{label:"Date",placeholder:"YYYY-MM-DD",name:"date",component:A}),i.a.createElement(M.b,{label:"Specialist",placeholder:"Specialist",name:"specialist",component:A}),i.a.createElement(M.b,{label:"Health rating",placeholder:"",name:"healthCheckRating",component:"select"},i.a.createElement("option",{value:n.Healthy},"Healthy"),i.a.createElement("option",{value:n.LowRisk},"Low risk"),i.a.createElement("option",{value:n.HighRisk},"High risk"),i.a.createElement("option",{value:n.CriticalRisk},"Critical risk")),i.a.createElement(q,{setFieldValue:r,setFieldTouched:o,diagnoses:Object.values(c)}),i.a.createElement(x.a,null,i.a.createElement(x.a.Column,{floated:"left",width:5},i.a.createElement(g.a,{type:"button",onClick:t,color:"red"},"Cancel")),i.a.createElement(x.a.Column,{floated:"right",width:5},i.a.createElement(g.a,{type:"submit",floated:"right",color:"green",disabled:!l||!a},"Add entry"))))}))},ae=t(447),te=function(e){var a=e.onSubmit,t=i.a.useState(),n=Object(m.a)(t,2),r=n[0],c=n[1];return i.a.createElement(i.a.Fragment,null,i.a.createElement(v.a,{as:"h3"},"Add new entry"),i.a.createElement("b",null,"Entry type: "),i.a.createElement(ae.a,{placeholder:"Select type",value:r,onChange:function(e,a){return c(a.value)},options:[{key:"none",value:"none",text:""},{key:l.Hospital,value:l.Hospital,text:"Hospital"},{key:l.OccupationalHealthcare,value:l.OccupationalHealthcare,text:"Occupational healthcare"},{key:l.HealthCheck,value:l.HealthCheck,text:"Health check"}]}),i.a.createElement(C.a,null),r===l.Hospital&&i.a.createElement(Z,{onSubmit:function(e){c(""),a(e)},onCancel:function(){return c("")}}),r===l.OccupationalHealthcare&&i.a.createElement($,{onSubmit:function(e){c(""),a(e)},onCancel:function(){return c("")}}),r===l.HealthCheck&&i.a.createElement(ee,{onSubmit:function(e){c(""),a(e)},onCancel:function(){return c("")}}))},ne=function(){var e=Object(f.f)().id,a=w(),t=Object(m.a)(a,2),n=t[0],c=n.patients,o=n.diagnosisCodes,s=t[1],d=c[e],p=i.a.useState(),E=Object(m.a)(p,2),g=E[0],k=E[1];i.a.useEffect((function(){if(d&&!d.fetchTimestamp){!function(){var a,t;u.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,u.a.awrap(h.a.get("".concat(y,"/patients/").concat(e)));case 3:a=n.sent,(t=a.data).fetchTimestamp=Math.floor(Date.now()/1e3),s(O(t)),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),console.error(n.t0);case 12:case"end":return n.stop()}}),null,null,[[0,9]])}()}}),[d,s,e]);var S,Y=function(e){switch(e){case l.Hospital:return"hospital";case l.OccupationalHealthcare:return"medkit";case l.HealthCheck:return"doctor";default:return"question"}},F=function(e){var a=e.entry;switch(a.type){case l.Hospital:return i.a.createElement(K,{entry:a});case l.OccupationalHealthcare:return i.a.createElement(Q,{entry:a});case l.HealthCheck:return i.a.createElement(W,{entry:a});default:return function(e){throw new Error("Unhandled value: ".concat(JSON.stringify(e)))}(a)}},x=function(e){var a=e.listOfCodes;return a?i.a.createElement("div",null,i.a.createElement(v.a,{as:"h3"},"codes"),i.a.createElement("ul",null,a.map((function(e){var a=o.find((function(a){return a.code===e}));return i.a.createElement("li",{key:"".concat(Math.random(),"_").concat(e)},e," ",null===a||void 0===a?void 0:a.name)})))):null};return d?i.a.createElement(b.a,null,i.a.createElement(T.a,null,i.a.createElement(v.a,{as:"h2"},d.name," ",i.a.createElement(J.a,{name:function(e){switch(e){case r.Male:return"man";case r.Female:return"woman";default:return"other gender horizontal"}}(d.gender)})),i.a.createElement(H.a,{celled:!0},i.a.createElement(H.a.Body,null,i.a.createElement(H.a.Row,null,i.a.createElement(H.a.Cell,null,"ssn"),i.a.createElement(H.a.Cell,null,d.ssn)),i.a.createElement(H.a.Row,null,i.a.createElement(H.a.Cell,null,"occupation"),i.a.createElement(H.a.Cell,null,d.occupation)),i.a.createElement(H.a.Row,null,i.a.createElement(H.a.Cell,null,"date of birth:"),i.a.createElement(H.a.Cell,null,d.dateOfBirth))))),i.a.createElement(T.a,null,g&&i.a.createElement(T.a,{inverted:!0,color:"red"},"Error: ".concat(g)),i.a.createElement(te,{onSubmit:function(a){var t,n,l;return u.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,u.a.awrap(h.a.post("".concat(y,"/patients/").concat(e,"/entries"),a));case 3:n=r.sent,l=Object(D.a)({},c[e]),null===(t=l.entries)||void 0===t||t.push(n.data),s(O(l)),k(""),r.next=13;break;case 10:r.prev=10,r.t0=r.catch(0),k(r.t0.response.data.error);case 13:case"end":return r.stop()}}),null,null,[[0,10]])}})),i.a.createElement(T.a,null,i.a.createElement(v.a,{as:"h3"}," entries "),null===(S=d.entries)||void 0===S?void 0:S.map((function(e){return i.a.createElement(T.a,{key:e.id},i.a.createElement(v.a,{as:"h3"},e.date," ",i.a.createElement(J.a,{name:Y(e.type)})),i.a.createElement("i",null,e.description),"  - ",e.specialist,i.a.createElement(C.a,null),i.a.createElement(v.a,{as:"h4"},"Additional information"),i.a.createElement(F,{entry:e}),i.a.createElement(x,{listOfCodes:e.diagnosisCodes}))})))):null},le=function(){var e=w(),a=Object(m.a)(e,2)[1];return i.a.useEffect((function(){h.a.get("".concat(y,"/ping"));!function(){var e,t;u.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,u.a.awrap(h.a.get("".concat(y,"/patients")));case 3:e=n.sent,t=e.data,a({type:"SET_PATIENT_LIST",payload:t}),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),console.error(n.t0);case 11:case"end":return n.stop()}}),null,null,[[0,8]])}();!function(){var e,t;u.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,u.a.awrap(h.a.get("".concat(y,"/diagnoses")));case 3:e=n.sent,t=e.data,a({type:"SET_DIAGNOSIS_LIST",payload:t}),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),console.error(n.t0);case 11:case"end":return n.stop()}}),null,null,[[0,8]])}()}),[a]),i.a.createElement("div",{className:"App"},i.a.createElement(E.a,null,i.a.createElement(b.a,null,i.a.createElement(v.a,{as:"h1"},"Patientor"),i.a.createElement(g.a,{as:E.b,to:"/",primary:!0},"Home"),i.a.createElement(C.a,{hidden:!0}),i.a.createElement(f.c,null,i.a.createElement(f.a,{path:"/:id",render:function(){return i.a.createElement(ne,null)}}),i.a.createElement(f.a,{path:"/",render:function(){return i.a.createElement(U,null)}})))))};s.a.render(i.a.createElement((function(e){var a=e.reducer,t=e.children,n=Object(c.useReducer)(a,S),l=Object(m.a)(n,2),r=l[0],o=l[1];return i.a.createElement(Y.Provider,{value:[r,o]},t)}),{reducer:function(e,a){switch(a.type){case"SET_PATIENT_LIST":return Object(D.a)({},e,{patients:Object(D.a)({},a.payload.reduce((function(e,a){return Object(D.a)({},e,Object(k.a)({},a.id,a))}),{}),{},e.patients)});case"ADD_PATIENT":case"UPDATE_PATIENT":return Object(D.a)({},e,{patients:Object(D.a)({},e.patients,Object(k.a)({},a.payload.id,a.payload))});case"SET_DIAGNOSIS_LIST":return Object(D.a)({},e,{diagnosisCodes:a.payload});default:return e}}},i.a.createElement(le,null)),document.getElementById("root"))}},[[262,1,2]]]);
//# sourceMappingURL=main.10af6459.chunk.js.map